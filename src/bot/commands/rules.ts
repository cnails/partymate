import { Telegraf } from 'telegraf';
import { prisma } from '../../services/prisma.js';

export const registerRules = (bot: Telegraf) => {
  bot.command('rules', async (ctx) => {
    const user = ctx.from ? await prisma.user.findUnique({ where: { tgId: String(ctx.from.id) } }) : null;
    const role = user?.role;

    const baseRules = [
      'üí≥ *–û–ø–ª–∞—Ç–∞ –∑–∞—Ä–∞–Ω–µ–µ*. –û–ø–ª–∞—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è *–¥–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏*. –ü–æ—Å–ª–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–∞–∂–º–∏—Ç–µ ¬´–û–ø–ª–∞—Ç–∏–ª¬ª –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (—Å–∫—Ä–∏–Ω/—Ñ–∞–π–ª –æ–¥–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º).',
      'üîí *–ö–æ–Ω–Ω–µ–∫—Ç –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å*. –°–µ—Ä–≤–∏—Å –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚Äî *–º—ã –Ω–µ –ø–µ—Ä–µ–¥–∞—ë–º –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã*. –ö–∞–Ω–∞–ª —Å–≤—è–∑–∏ –≤–æ –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏ –≤—ã –≤—ã–±–∏—Ä–∞–µ—Ç–µ —Å–∞–º–∏ (Discord, Telegram –∏ –¥—Ä.).',
      'üéÆ *–ë–µ–∑ –≥–∞—Ä–∞–Ω—Ç–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞*. –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ *–Ω–µ –æ—Ç–≤–µ—á–∞—é—Ç –∑–∞ –∏—Å—Ö–æ–¥ –º–∞—Ç—á–µ–π*. –≠—Ç–æ –Ω–µ —É—Å–ª—É–≥–∏ –±—É—Å—Ç–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤; –¥–µ–Ω—å–≥–∏ –∑–∞ –ø—Ä–æ–∏–≥—Ä—ã—à –Ω–µ –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—Ç—Å—è.',
      'üí¨ *–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è*. –î–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏ —Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –ø–∏—Å—å–º–µ–Ω–Ω–æ (–≤ —á–∞—Ç–µ –∑–∞—è–≤–∫–∏/–≤—ã–±—Ä–∞–Ω–Ω–æ–º –∫–∞–Ω–∞–ª–µ) ‚Äî —Ç–∞–∫ –ø—Ä–æ—â–µ —Ä–µ—à–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã.',
      '‚úÖ *–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ*. –ü–æ –∏—Ç–æ–≥–∞–º –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã –æ—Ç–º–µ—á–∞—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ü—Ä–∏ –¥–æ–ª–≥–æ–º –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –±–æ—Ç —à–ª—ë—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ –º–æ–∂–µ—Ç –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É –ø–æ —Ç–∞–π–º–µ—Ä—É.',
      'üõ° *–ü–æ–≤–µ–¥–µ–Ω–∏–µ*. –£–≤–∞–∂–∏—Ç–µ–ª—å–Ω—ã–π —Ç–æ–Ω, –±–µ–∑ —Å–ø–∞–º–∞/–æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏–π/–Ω–µ–∑–∞–∫–æ–Ω–Ω–æ–≥–æ –∏–ª–∏ NSFW-–∫–æ–Ω—Ç–µ–Ω—Ç–∞.',
      'üÜò *–°–ø–æ—Ä—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞*. –ü–∏—à–∏—Ç–µ –≤ /support –∏–ª–∏ –Ω–∞ @partymate\_support; –ø—Ä–∏–∫–ª–∞–¥—ã–≤–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã/–ø–µ—Ä–µ–ø–∏—Å–∫—É.',
      'üß∞ *–î–∏—Å–∫–ª–µ–π–º–µ—Ä*. –ü–ª–∞—Ç–µ–∂–∏ –∏ –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏ ‚Äî –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏; —Å–µ—Ä–≤–∏—Å –Ω–µ —Ö—Ä–∞–Ω–∏—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞ –∏ –Ω–µ –≤—ã—Å—Ç—É–ø–∞–µ—Ç –ø–ª–∞—Ç—ë–∂–Ω—ã–º –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–º, –Ω–æ –ø–æ–º–æ–≥–∞–µ—Ç —Å –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π —Å–ø–æ—Ä–æ–≤.',
      'üí° *–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å*. –°–µ—Ä–≤–∏—Å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —É–ª—É—á—à–∞–µ—Ç—Å—è ‚Äî —Ä–∞–¥—ã –æ—Ç–∑—ã–≤–∞–º –∏ –∏–¥–µ—è–º –≤ /support –∏–ª–∏ @partymate\_support.',
    ].join('\n');

    if (role === 'PERFORMER') {
      await ctx.replyWithMarkdown(
        [
          baseRules,
          '',
          '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∏—Ü:',
          '‚Ä¢ –ê–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –∏–ª–∏ –±—É—Å—Ç –ø–æ–≤—ã—à–∞—é—Ç –≤–∏–¥–∏–º–æ—Å—Ç—å –∞–Ω–∫–µ—Ç—ã –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–æ–ª—É—á–∞—Ç—å –∑–∞—è–≤–∫–∏.',
          '‚Ä¢ –°–ª–µ–¥–∏—Ç–µ –∑–∞ —Å—Ä–æ–∫–æ–º –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –ø—Ä–æ–¥–ª–µ–≤–∞–π—Ç–µ –µ—ë –≤–æ–≤—Ä–µ–º—è.',
        ].join('\n'),
      );
      return;
    }

    await ctx.replyWithMarkdown(baseRules);
  });
};
