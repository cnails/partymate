# Gaming-Duo Telegram Bot (MVP)

## Описание
MVP-база под площадку дуо/общения: роли, онбординг, анкета исполнительницы, сохранение в БД, зачатки заявок. В списке доступных услуг теперь есть не только игры, но и «Просто общение».

## Развертывание
1. Скопируйте .env.example → .env, заполните переменные.
2. Поднимите Postgres и Redis: `docker compose up -d`.
3. Примените миграции: `npx prisma migrate dev --name init`.
4. Запустите: `npm run dev` (или `npm run build && npm start`).

## Команды бота
- `/start` — выбор роли и вход в онбординг.
- `/help` — справка.
- `/listing` — (исполнительницы) управление анкетой.
- `/search` — (клиенты) подбор (пока заглушка).
- `/requests` — заявки (заглушка).
- `/report` — жалоба.

## Дальнейшие шаги
- Реализовать поиск/каталог (фильтры, сортировка, "онлайн сейчас").
- Добавить статусы заявок и приватный чат-связку.
- Встроить P2P-мету (пруф оплаты) и отзывы.
- Включить KYC-очередь и админ-бот/панель.
- Бусты и тарифы для исполнительниц.

### Новое в этом коммите
- /search <услуга>: поиск анкет (ACTIVE) по услуге, карточки с кнопкой «Оставить заявку».
- Мастер заявки: выбор услуги из профиля, длительность, пожелания по времени, создание Request.
- Флоу заявок: Принять/Отклонить → клиент «Оплатил» (загрузка пруфа) → «Получено» → COMPLETED.
- Prisma: PaymentMeta.instructions, .env: AUTO_APPROVE_PERFORMERS=true для dev.

### Как быстро протестировать (polling)
1. Создайте `.env` со своим BOT_TOKEN и без WEBHOOK_DOMAIN (polling активируется сам).
2. `docker compose up -d` → `npx prisma migrate dev` → `npm run dev`.
3. В Telegram:
   - Зайдите как исполнительница → /start → роль → заполните анкету (в dev она сразу ACTIVE).
   - Вторым аккаунтом как клиент: `/search CS2` или `/search "Просто общение"` → откройте анкету → «Оставить заявку» → пройдите мастер.
   - От лица исполнительницы примите заявку; реквизиты отправятся автоматически при условии заполнения.
   - От клиента — «Оплатил» и загрузите скрин (photo/document).
   - От исполнительницы — «Получено». Готово.
